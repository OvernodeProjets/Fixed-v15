<nav class="p-4 md:py-8 xl:px-0 md:container md:max-w-6xl md:mx-auto">
    <div class="hidden lg:flex lg:justify-between lg:items-center">
        <a href="#" class="flex items-center gap-2">
            <img class="h-8 w-8" src="https://cdn.discordapp.com/attachments/1041098786275078164/1294322804614762568/sdfgsdf_15.png?ex=6732cd4b&is=67317bcb&hm=dd5dbbf72a9675989f2a911fa1064ca8f79291d5f1ca3a01c10a6373c53df94d&"/>
            <div class="bg-gray-100 font-medium text-gray-800 p-2 rounded-md">
                <%= name %>
            </div>
        </a>
        
        <ul class="flex items-center space-x-4 text-sm font-semibold">
            <li><a href="../panel/home" class="px-2 xl:px-4 py-2 text-gray-600 rounded-md hover:bg-gray-200 transition-colors">Home</a></li>
            <li><a href="../panel/creds" class="px-2 xl:px-4 py-2 text-gray-600 rounded-md hover:bg-gray-200 transition-colors">Panel Credentials</a></li>
            <li><a href="../servers/create" class="px-2 xl:px-4 py-2 text-gray-600 rounded-md hover:bg-gray-200 transition-colors">Create Server</a></li>
            
            <!-- Dropdown Menu -->
            <li class="relative" id="dropdown-container">
                <button 
                    id="dropdown-button"
                    class="px-2 xl:px-4 py-2 text-gray-600 rounded-md hover:bg-gray-200 flex gap-2 items-center transition-colors"
                    aria-expanded="false"
                    aria-haspopup="true"
                >
                    Coins & Resources
                    <svg 
                        id="dropdown-arrow" 
                        xmlns="http://www.w3.org/2000/svg" 
                        class="w-4 h-4 stroke-current transform transition-transform duration-200" 
                        fill="none" 
                        viewBox="0 0 24 24" 
                        stroke="currentColor"
                    >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
                
                <ul 
                    id="dropdown-menu"
                    class="absolute z-50 top-full left-0 bg-white rounded-md shadow-lg w-64 invisible opacity-0 transform -translate-y-2 transition-all duration-200 ease-out"
                >
                    <li><a href="../panel/afk" class="block px-4 py-3 text-sm text-gray-600 rounded-t-md hover:bg-gray-100 transition-colors">AFK Page</a></li>
                    <li><a href="../store/buy" class="block px-4 py-3 text-sm text-gray-600 rounded-b-md hover:bg-gray-100 transition-colors">Resources Store</a></li>
                </ul>
            </li>
            
            <% if(admin) { %>
                <li><a href="../admin/admin" class="px-2 xl:px-4 py-2 text-gray-600 rounded-md hover:bg-gray-200">Admin</a></li>
            <% } %>
        </ul>
        
        <ul class="flex items-center gap-6">
            <li><div class="text-sm font-sans text-gray-800 font-semibold"><%= coins %> coins</div></li>
            <li><a href="#" class="text-sm font-sans text-gray-800 font-semibold"><%= userinfo.username %>#<%= userinfo.discriminator %></a></li>
            <li>
                <a href="/auth/logout" class="p-3 rounded hover:bg-gray-100 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 stroke-current text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                </a>
            </li>
        </ul>
    </div>
    
    <!-- Mobile Navigation -->
    <div class="lg:hidden flex justify-between w-full">
        <a href="#" class="bg-gray-200 text-gray-800 font-medium p-3 rounded-md"><%= name %></a>
        <a href="#" class="bg-gray-200 text-gray-800 font-medium p-3 rounded-md"><%= coins %> coins</a>
        <button type="button" class="bg-gray-200 p-3 rounded-md">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
            </svg>
        </button>
    </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dropdownButton = document.getElementById('dropdown-button');
    const dropdownMenu = document.getElementById('dropdown-menu');
    const dropdownArrow = document.getElementById('dropdown-arrow');
    const dropdownContainer = document.getElementById('dropdown-container');
    
    let isOpen = false;
    let closeTimeout;

    function openDropdown() {
        clearTimeout(closeTimeout);
        isOpen = true;
        dropdownButton.setAttribute('aria-expanded', 'true');
        dropdownMenu.classList.remove('invisible', 'opacity-0', '-translate-y-2');
        dropdownMenu.classList.add('visible', 'opacity-100', 'translate-y-0');
        dropdownArrow.classList.add('rotate-90');
    }

    function closeDropdown() {
        isOpen = false;
        dropdownButton.setAttribute('aria-expanded', 'false');
        dropdownMenu.classList.add('invisible', 'opacity-0', '-translate-y-2');
        dropdownMenu.classList.remove('visible', 'opacity-100', 'translate-y-0');
        dropdownArrow.classList.remove('rotate-90');
    }

    function scheduleClose() {
        closeTimeout = setTimeout(closeDropdown, 150);
    }

    dropdownButton.addEventListener('mouseenter', openDropdown);
    dropdownButton.addEventListener('mouseleave', scheduleClose);
    dropdownButton.addEventListener('click', function(e) {
        e.preventDefault();
        if (isOpen) {
            closeDropdown();
        } else {
            openDropdown();
        }
    });

    dropdownMenu.addEventListener('mouseenter', function() {
        clearTimeout(closeTimeout);
    });
    dropdownMenu.addEventListener('mouseleave', scheduleClose);

    document.addEventListener('click', function(e) {
        if (!dropdownContainer.contains(e.target)) {
            closeDropdown();
        }
    });

    dropdownButton.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            if (isOpen) {
                closeDropdown();
            } else {
                openDropdown();
            }
        } else if (e.key === 'Escape') {
            closeDropdown();
        }
    });
});
</script>